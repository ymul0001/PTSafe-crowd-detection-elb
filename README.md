<p align="center">
    <img src="https://ptsafe-readme-images.s3.ap-southeast-1.amazonaws.com/ptsafe.JPG" alt="PTSafe logo" title="PTSafe"  height="150" />
</p>
<h1 align="center">
    PTSafe Backend (version 1.0)
</h1>
<a align="center" href="https://github.com/ymul0001/ptsafe-backend">
    <img src="https://ptsafe-readme-images.s3.ap-southeast-1.amazonaws.com/Star_icon_stylizedpng.png" alt="PTSafe logo" title="PTSafe"  height="20" />
    Star us on GitHub â€” it motivates us a lot!
</a> 




## 1. Overview

The PTSafe backend is created in order to support the main functionalities that are covered in the PTSafe mobile application (can be found here in [PTSafe mobile](https://github.com/ymul0001/ptsafe-mobile)). It consists of two main backend framework developed on top of Flask and NodeJS, and it is connected to the data source Amazon Web Services (AWS) RDS. While the Flask API is utilised to expose the crowd detection model, the NodeJS-Express API is utilised to expose the main data source for the application. To support the deployment process, both backend APIs are served in AWS Elastic Beanstalk [link](https://aws.amazon.com/elasticbeanstalk/) Platform-as-a-service (PaaS) hosting service.

## 2. Software Architecture and Design Principle Involved
### 2.1. Backend for the main software functionality
The back-end object detection part of the application is established by using a Flask API framework based on python. It is expected at this point that all API endpoint creation is generated by using a functional programming paradigm rather than Object-Oriented Principle (OOP) to speed up the development process. 

Meanwhile, the model is developed by using YOLOv3 computer vision black-box, and achieve an accuracy of nearly 90% for each edge cases.

## 3. Tech/framework used
- [Flask](https://flask.palletsprojects.com/en/2.1.x/)
- [Yolov3](https://pjreddie.com/darknet/yolo/)
- [OpenCV](https://opencv.org/)
- [AWS Elastic Beanstalk](https://aws.amazon.com/elasticbeanstalk/)
- [AWS CodePipeline](https://aws.amazon.com/codepipeline/)
- [Postman](https://www.postman.com/)

## 4. Libraries/package involved:

### 4.2. Flask dependencies
- click (7.1.2)
- Flask (1.1.2)
- gunicorn (20.0.4)
- itsdangerous (1.1.0)
- Jinja2 (2.11.2)
- MarkupSafe (1.1.1)
- numpy (1.18.4)
- opencv-python (4.2.0.34)
- scipy (1.4.1)
- Werkzeug (1.0.1)

## 5. List of endpoints and functionalities
| Endpoint | Request Method  | Request param  | Request body | functionalities
| :---:   | :-: | :-: | :-: | :-: |
| http://ptsafeyoloapi-env-1.eba-2wtk3jqk.us-east-1.elasticbeanstalk.com/v1/predict| POST | none | file (JPG, PNG) | detect number of people inside a carriage

## 7. Installation
### 7.1. Flask API
Some steps are required to run this application locally on your computer machine:
- Fork this repository to your own machine
- Install required packages including Flask, Python, etc 
- Happy exploring!

## 8. Active development branch
- master (is merged with the iteration-2 branch)

